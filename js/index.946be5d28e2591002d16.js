(()=>{var t={608:()=>{function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var o,r,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(o=n.next()).done)&&(i.push(o.value),!e||i.length!==e);a=!0);}catch(t){u=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw r}}return i}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function n(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var u,c,s,d,l,f,v,m,p,y,b,h,g,E,w,L,O,S,A=document.getElementById("canvas"),T=0,j=document.querySelector("#start"),N=(document.querySelector("#result"),document.querySelector("#pause"),document.querySelector("#save")),x=document.querySelector("#countMoves");function P(t,e,n,o,r){M(t,e,n,o,15),s.fillStyle="rgba(203,134,44,0.88)",s.fill();M(t+.1*n,e+.1*o,.8*n,.8*o,12),s.fillStyle="rgb(235,210,157)",s.fill();var i=.35;r>9&&(i=.2);var a=.6*o,u=n*i+t,c=.69*o+e;s.fillStyle="#000",s.font="".concat(a,"px San Francisco"),s.fillText(r,u,c)}function M(t,e,n,o,r){s.beginPath(),s.moveTo(t,e+r),s.arcTo(t,e+o,t+r,e+o,r),s.arcTo(t+n,e+o,t+n,e+o-r,r),s.arcTo(t+n,e,t+n-r,e,r),s.arcTo(t,e,t,e+r,r),s.stroke()}function C(t,e){s.clearRect(0,0,u,c),function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<l;n++)for(var o=0;o<f;o++)if(d[n][o]){if((0!==t||0!==e)&&d[n][o]===d[b][h]){P(o*(v+p)+p+t,n*(m+p)+p+e,v-p,m-p,d[n][o]);continue}P(o*(v+p)+p,n*(m+p)+p,v-p,m-p,d[n][o])}}(t,e)}function D(t){if(v=u/(f=4)-(p=2),m=c/(l=4)-p,null==t||!t.matrix){var e=r(new Array(l*f)).map((function(t,e){return e||null})).sort((function(){return.5-Math.random()}));d=new Array(l);for(var n=0;n<l;n++){d[n]=new Array(f);for(var o=0;o<f;o++){var i=e.shift();i||(y=[n,o]),d[n][o]=i}}}}function I(){s=A.getContext("2d"),u=A.width,c=A.height,O=A.offsetLeft,S=O+u;var t,e=null!=(t=localStorage.game?JSON.parse(localStorage.game):null)&&t.matrix&&Array.isArray(t.matrix)&&Array.isArray(t.empty)?t:{},n=e.matrix,o=e.empty,r=e.moves;n&&o&&r?(d=n,y=o,T=r,D({matrix:n,empty:o,moves:r})):D(),k(T),C()}function X(){for(var t=1,e=0;e<l;e++)for(var o=0;o<f;o++){if(d[e][o]!==t)return;if(t===l*f-1)break;t++}alert("игра окончена! Количество ходов: ".concat(T)),L={shuffle:T,time},function(){var t=(e=localStorage.result?JSON.parse(localStorage.result):null,null!=e&&e.results&&Array.isArray(e.results)?e.results:[]);var e;if(0===t.length)return void(localStorage.result=JSON.stringify({results:[n(n({},L),{},{id:0})]}));for(var o=[],r=0;r<t.length;r++)L.shuffle>t[r].shuffle?o.push(n(n({},t[r]),{},{id:o.length})):(o.push(n(n({},L),{},{id:t[r].id}),n(n({},t[r]),{},{id:t[r].id+1})),L.shuffle=1/0);o=o.length>10?o.slice(0,o.length-1):o,localStorage.result=JSON.stringify({results:o})}()}function k(t){T=t,x.innerHTML="".concat(T)}function J(e){var n=t(g,2),o=n[0],r=n[1];if(0!==o){var i=e.offsetX-E;(o>0&&i>=0&&i<76||o<0&&i<=0&&i>-76)&&C(i,0)}if(0!==r){var a=e.offsetY-w;(r>0&&a<=0&&a>-76||r<0&&a>=0&&a<76)&&C(0,a)}}function Y(t){var e=t.offsetX-E,n=t.offsetY-w;(e>20||e<-20||n>20||n<-20)&&(d[y[0]][y[1]]=d[b][h],d[b][h]=null,y=[b,h],X(),k(T+1)),C(),A.removeEventListener("pointermove",J),document.removeEventListener("pointerup",Y)}I(),j.addEventListener("pointerdown",(function(){localStorage.game=JSON.stringify({}),k(0),I()})),N.addEventListener("pointerdown",(function(){localStorage.game=JSON.stringify({matrix:d,empty:y,moves:T,time:undefined})})),A.addEventListener("pointerdown",(function(e){if(e.offsetX>O&&e.offsetX<S){E=e.offsetX,w=e.offsetY;var n=t((o=e.offsetX,r=e.offsetY,a=v+(i=p),u=m+i,[Math.floor(r/a),Math.floor(o/u)]),2);b=n[0],h=n[1],g=function(t,e,n){var o="".concat(e,",").concat(n),r="".concat(t[0]-1,",").concat(t[1]),i="".concat(t[0],",").concat(t[1]-1),a="".concat(t[0],",").concat(t[1]+1),u="".concat(t[0]+1,",").concat(t[1]);return o===r?g=[0,-1]:o===i?g=[1,0]:o===a?g=[-1,0]:o===u&&(g=[0,1])}(y,b,h),g&&(A.addEventListener("pointermove",J),document.addEventListener("pointerup",Y))}var o,r,i,a,u})),A.ondragstart=function(){return!1}},483:function(){!function(){"use strict";function t(t){var e=!0,n=!1,o=null,r={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function i(t){return!!(t&&t!==document&&"HTML"!==t.nodeName&&"BODY"!==t.nodeName&&"classList"in t&&"contains"in t.classList)}function a(t){var e=t.type,n=t.tagName;return!("INPUT"!==n||!r[e]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable}function u(t){t.classList.contains("focus-visible")||(t.classList.add("focus-visible"),t.setAttribute("data-focus-visible-added",""))}function c(t){t.hasAttribute("data-focus-visible-added")&&(t.classList.remove("focus-visible"),t.removeAttribute("data-focus-visible-added"))}function s(n){n.metaKey||n.altKey||n.ctrlKey||(i(t.activeElement)&&u(t.activeElement),e=!0)}function d(t){e=!1}function l(t){i(t.target)&&(e||a(t.target))&&u(t.target)}function f(t){i(t.target)&&(t.target.classList.contains("focus-visible")||t.target.hasAttribute("data-focus-visible-added"))&&(n=!0,window.clearTimeout(o),o=window.setTimeout((function(){n=!1}),100),c(t.target))}function v(t){"hidden"===document.visibilityState&&(n&&(e=!0),m())}function m(){document.addEventListener("mousemove",y),document.addEventListener("mousedown",y),document.addEventListener("mouseup",y),document.addEventListener("pointermove",y),document.addEventListener("pointerdown",y),document.addEventListener("pointerup",y),document.addEventListener("touchmove",y),document.addEventListener("touchstart",y),document.addEventListener("touchend",y)}function p(){document.removeEventListener("mousemove",y),document.removeEventListener("mousedown",y),document.removeEventListener("mouseup",y),document.removeEventListener("pointermove",y),document.removeEventListener("pointerdown",y),document.removeEventListener("pointerup",y),document.removeEventListener("touchmove",y),document.removeEventListener("touchstart",y),document.removeEventListener("touchend",y)}function y(t){t.target.nodeName&&"html"===t.target.nodeName.toLowerCase()||(e=!1,p())}document.addEventListener("keydown",s,!0),document.addEventListener("mousedown",d,!0),document.addEventListener("pointerdown",d,!0),document.addEventListener("touchstart",d,!0),document.addEventListener("visibilitychange",v,!0),m(),t.addEventListener("focus",l,!0),t.addEventListener("blur",f,!0),t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host?t.host.setAttribute("data-js-focus-visible",""):t.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if("undefined"!=typeof window&&"undefined"!=typeof document){var e;window.applyFocusVisiblePolyfill=t;try{e=new CustomEvent("focus-visible-polyfill-ready")}catch(t){(e=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(e)}"undefined"!=typeof document&&t(document)}()},353:t=>{t.exports='<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"/> <meta name="viewport" content="width=device-width,initial-scale=1"/> <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/> <title>Game</title> </head> <body> <div class="container"> <div class="button-wrapper"> <button type="button" id="start" class="button button-one"> Shuffle and start </button> <button type="button" id="pause" class="button">Stop</button> <button type="button" id="save" class="button">Save</button> <button type="button" id="result" class="button">Result</button> </div> <div class="timer"> <div id="mins"></div><div id="secs"></div> </div> <div class="canvas"> <canvas id="canvas" width="300" height="300"></canvas> </div> <p class="moves button">Moves: <span id="countMoves">0</span></p> </div> </body> </html> '}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";n(483),n(353),n(608)})()})();
